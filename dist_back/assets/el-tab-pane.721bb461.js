import{b as K,B as Q,C as oe,d as L,D as Z,br as ee,u as U,v as T,K as M,Q as te,b2 as j,P as _e,o as re,a as ie,n as ce,f as O,g as ge,_ as ue,N as ae,cE as Te,cF as Ne,c as V,J as de,bs as Pe,y as c,E as I,aC as Ce,aD as Ee,a_ as we,aH as z,p as Se,r as J,bI as $e,aM as xe,G as Be,aR as se,X as ke,cG as ne,S as Oe,bT as Re,Y as ze,Z as Ae,l as Fe,m as Me,q as Le}from"./index.12244a07.js";import{c as A}from"./strings.c7fbc6d7.js";import{U as be}from"./event.1aa8b38f.js";import{u as Ve}from"./index.893e1251.js";const q=Symbol("tabsRootContextKey"),De=K({tabs:{type:Q(Array),default:()=>oe([])}}),ve="ElTabBar",Ie=L({name:ve}),Ke=L({...Ie,props:De,setup(e,{expose:o}){const y=e,_=ae(),a=Z(q);a||ee(ve,"<el-tabs><el-tab-bar /></el-tabs>");const b=U("tabs"),E=T(),v=T(),p=()=>{let n=0,m=0;const d=["top","bottom"].includes(a.props.tabPosition)?"width":"height",k=d==="width"?"x":"y",s=k==="x"?"left":"top";return y.tabs.every(w=>{var S,$;const N=($=(S=_.parent)==null?void 0:S.refs)==null?void 0:$[`tab-${w.uid}`];if(!N)return!1;if(!w.active)return!0;n=N[`offset${A(s)}`],m=N[`client${A(d)}`];const x=window.getComputedStyle(N);return d==="width"&&(m-=Number.parseFloat(x.paddingLeft)+Number.parseFloat(x.paddingRight),n+=Number.parseFloat(x.paddingLeft)),!1}),{[d]:`${m}px`,transform:`translate${A(k)}(${n}px)`}},g=()=>v.value=p(),h=[],r=()=>{var n;h.forEach(d=>d.stop()),h.length=0;const m=(n=_.parent)==null?void 0:n.refs;if(!!m){for(const d in m)if(d.startsWith("tab-")){const k=m[d];k&&h.push(j(k,g))}}};M(()=>y.tabs,async()=>{await te(),g(),r()},{immediate:!0});const u=j(E,()=>g());return _e(()=>{h.forEach(n=>n.stop()),h.length=0,u.stop()}),o({ref:E,update:g}),(n,m)=>(re(),ie("div",{ref_key:"barRef",ref:E,class:ce([O(b).e("active-bar"),O(b).is(O(a).props.tabPosition)]),style:ge(v.value)},null,6))}});var Ue=ue(Ke,[["__file","tab-bar.vue"]]);const qe=K({panes:{type:Q(Array),default:()=>oe([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),He={tabClick:(e,o,y)=>y instanceof Event,tabRemove:(e,o)=>o instanceof Event},le="ElTabNav",We=L({name:le,props:qe,emits:He,setup(e,{expose:o,emit:y}){const _=Z(q);_||ee(le,"<el-tabs><tab-nav /></el-tabs>");const a=U("tabs"),b=Te(),E=Ne(),v=T(),p=T(),g=T(),h=T(),r=T(!1),u=T(0),n=T(!1),m=T(!0),d=V(()=>["top","bottom"].includes(_.props.tabPosition)?"width":"height"),k=V(()=>({transform:`translate${d.value==="width"?"X":"Y"}(-${u.value}px)`})),s=()=>{if(!v.value)return;const l=v.value[`offset${A(d.value)}`],i=u.value;if(!i)return;const t=i>l?i-l:0;u.value=t},w=()=>{if(!v.value||!p.value)return;const l=p.value[`offset${A(d.value)}`],i=v.value[`offset${A(d.value)}`],t=u.value;if(l-t<=i)return;const P=l-t>i*2?t+i:l-i;u.value=P},S=async()=>{const l=p.value;if(!r.value||!g.value||!v.value||!l)return;await te();const i=g.value.querySelector(".is-active");if(!i)return;const t=v.value,P=["top","bottom"].includes(_.props.tabPosition),f=i.getBoundingClientRect(),C=t.getBoundingClientRect(),D=P?l.offsetWidth-C.width:l.offsetHeight-C.height,R=u.value;let B=R;P?(f.left<C.left&&(B=R-(C.left-f.left)),f.right>C.right&&(B=R+f.right-C.right)):(f.top<C.top&&(B=R-(C.top-f.top)),f.bottom>C.bottom&&(B=R+(f.bottom-C.bottom))),B=Math.max(B,0),u.value=Math.min(B,D)},$=()=>{var l;if(!p.value||!v.value)return;e.stretch&&((l=h.value)==null||l.update());const i=p.value[`offset${A(d.value)}`],t=v.value[`offset${A(d.value)}`],P=u.value;t<i?(r.value=r.value||{},r.value.prev=P,r.value.next=P+t<i,i-P<t&&(u.value=i-t)):(r.value=!1,P>0&&(u.value=0))},N=l=>{let i=0;switch(l.code){case z.left:case z.up:i=-1;break;case z.right:case z.down:i=1;break;default:return}const t=Array.from(l.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let f=t.indexOf(l.target)+i;f<0?f=t.length-1:f>=t.length&&(f=0),t[f].focus({preventScroll:!0}),t[f].click(),x()},x=()=>{m.value&&(n.value=!0)},H=()=>n.value=!1;return M(b,l=>{l==="hidden"?m.value=!1:l==="visible"&&setTimeout(()=>m.value=!0,50)}),M(E,l=>{l?setTimeout(()=>m.value=!0,50):m.value=!1}),j(g,$),de(()=>setTimeout(()=>S(),0)),Pe(()=>$()),o({scrollToActiveTab:S,removeFocus:H}),()=>{const l=r.value?[c("span",{class:[a.e("nav-prev"),a.is("disabled",!r.value.prev)],onClick:s},[c(I,null,{default:()=>[c(Ce,null,null)]})]),c("span",{class:[a.e("nav-next"),a.is("disabled",!r.value.next)],onClick:w},[c(I,null,{default:()=>[c(Ee,null,null)]})])]:null,i=e.panes.map((t,P)=>{var f,C,D,R;const B=t.uid,W=t.props.disabled,G=(C=(f=t.props.name)!=null?f:t.index)!=null?C:`${P}`,X=!W&&(t.isClosable||e.editable);t.index=`${P}`;const me=X?c(I,{class:"is-icon-close",onClick:F=>y("tabRemove",t,F)},{default:()=>[c(we,null,null)]}):null,he=((R=(D=t.slots).label)==null?void 0:R.call(D))||t.props.label,ye=!W&&t.active?0:-1;return c("div",{ref:`tab-${B}`,class:[a.e("item"),a.is(_.props.tabPosition),a.is("active",t.active),a.is("disabled",W),a.is("closable",X),a.is("focus",n.value)],id:`tab-${G}`,key:`tab-${B}`,"aria-controls":`pane-${G}`,role:"tab","aria-selected":t.active,tabindex:ye,onFocus:()=>x(),onBlur:()=>H(),onClick:F=>{H(),y("tabClick",t,G,F)},onKeydown:F=>{X&&(F.code===z.delete||F.code===z.backspace)&&y("tabRemove",t,F)}},[he,me])});return c("div",{ref:g,class:[a.e("nav-wrap"),a.is("scrollable",!!r.value),a.is(_.props.tabPosition)]},[l,c("div",{class:a.e("nav-scroll"),ref:v},[c("div",{class:[a.e("nav"),a.is(_.props.tabPosition),a.is("stretch",e.stretch&&["top","bottom"].includes(_.props.tabPosition))],ref:p,style:k.value,role:"tablist",onKeydown:N},[e.type?null:c(Ue,{ref:h,tabs:[...e.panes]},null),i])])])}}}),Ge=K({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Q(Function),default:()=>!0},stretch:Boolean}),Y=e=>xe(e)||Be(e),Xe={[be]:e=>Y(e),tabClick:(e,o)=>o instanceof Event,tabChange:e=>Y(e),edit:(e,o)=>["remove","add"].includes(o),tabRemove:e=>Y(e),tabAdd:()=>!0},Ye=L({name:"ElTabs",props:Ge,emits:Xe,setup(e,{emit:o,slots:y,expose:_}){var a;const b=U("tabs"),E=V(()=>["left","right"].includes(e.tabPosition)),{children:v,addChild:p,removeChild:g}=Ve(ae(),"ElTabPane"),h=T(),r=T((a=e.modelValue)!=null?a:"0"),u=async(s,w=!1)=>{var S,$,N;if(!(r.value===s||se(s)))try{await((S=e.beforeLeave)==null?void 0:S.call(e,s,r.value))!==!1&&(r.value=s,w&&(o(be,s),o("tabChange",s)),(N=($=h.value)==null?void 0:$.removeFocus)==null||N.call($))}catch{}},n=(s,w,S)=>{s.props.disabled||(u(w,!0),o("tabClick",s,S))},m=(s,w)=>{s.props.disabled||se(s.props.name)||(w.stopPropagation(),o("edit",s.props.name,"remove"),o("tabRemove",s.props.name))},d=()=>{o("edit",void 0,"add"),o("tabAdd")};M(()=>e.modelValue,s=>u(s)),M(r,async()=>{var s;await te(),(s=h.value)==null||s.scrollToActiveTab()}),Se(q,{props:e,currentName:r,registerPane:s=>{v.value.push(s)},sortPane:p,unregisterPane:g}),_({currentName:r});const k=({render:s})=>s();return()=>{const s=y["add-icon"],w=e.editable||e.addable?c("div",{class:[b.e("new-tab"),E.value&&b.e("new-tab-vertical")],tabindex:"0",onClick:d,onKeydown:N=>{[z.enter,z.numpadEnter].includes(N.code)&&d()}},[s?J(y,"add-icon"):c(I,{class:b.is("icon-plus")},{default:()=>[c($e,null,null)]})]):null,S=c("div",{class:[b.e("header"),E.value&&b.e("header-vertical"),b.is(e.tabPosition)]},[c(k,{render:()=>{const N=v.value.some(x=>x.slots.label);return c(We,{ref:h,currentName:r.value,editable:e.editable,type:e.type,panes:v.value,stretch:e.stretch,onTabClick:n,onTabRemove:m},{$stable:!N})}},null),w]),$=c("div",{class:b.e("content")},[J(y,"default")]);return c("div",{class:[b.b(),b.m(e.tabPosition),{[b.m("card")]:e.type==="card",[b.m("border-card")]:e.type==="border-card"}]},[$,S])}}});var je=Ye;const Je=K({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),fe="ElTabPane",Qe=L({name:fe}),Ze=L({...Qe,props:Je,setup(e){const o=e,y=ae(),_=ke(),a=Z(q);a||ee(fe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const b=U("tab-pane"),E=T(),v=V(()=>o.closable||a.props.closable),p=ne(()=>{var n;return a.currentName.value===((n=o.name)!=null?n:E.value)}),g=T(p.value),h=V(()=>{var n;return(n=o.name)!=null?n:E.value}),r=ne(()=>!o.lazy||g.value||p.value);M(p,n=>{n&&(g.value=!0)});const u=Oe({uid:y.uid,slots:_,props:o,paneName:h,active:p,index:E,isClosable:v});return a.registerPane(u),de(()=>{a.sortPane(u)}),Re(()=>{a.unregisterPane(u.uid)}),(n,m)=>O(r)?ze((re(),ie("div",{key:0,id:`pane-${O(h)}`,class:ce(O(b).b()),role:"tabpanel","aria-hidden":!O(p),"aria-labelledby":`tab-${O(h)}`},[J(n.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Ae,O(p)]]):Fe("v-if",!0)}});var pe=ue(Ze,[["__file","tab-pane.vue"]]);const nt=Me(je,{TabPane:pe}),lt=Le(pe);export{lt as E,nt as a};
