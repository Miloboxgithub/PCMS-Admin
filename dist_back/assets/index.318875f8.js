import{ai as ke,G as ye,b as We,a4 as Ue,B as q,i as xe,C as Ye,be as Xe,aM as Z,L as Y,v as L,K as X,bm as ee,aL as we,N as Ge,Q as V,d as Ne,b$ as Je,X as Qe,c as h,b3 as _e,b4 as qe,a5 as Ze,bz as et,u as Ce,b6 as tt,aY as ot,c0 as at,a3 as nt,b2 as st,aF as Se,J as lt,bE as it,o as v,a as S,l as m,F as te,n as g,f as t,r as j,e as P,j as E,w as M,k as W,E as R,al as Ie,y as rt,ba as ut,aN as ct,au as dt,t as U,g as Ee,_ as pt,H as ze,m as ft}from"./index.12244a07.js";import{U as oe}from"./event.1aa8b38f.js";import{u as vt}from"./index.bccee1bd.js";const mt=()=>ke&&/firefox/i.test(window.navigator.userAgent);let C;const ht=`
  height:0 !important;
  visibility:hidden !important;
  ${mt()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,gt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function bt(a){const r=window.getComputedStyle(a),l=r.getPropertyValue("box-sizing"),o=Number.parseFloat(r.getPropertyValue("padding-bottom"))+Number.parseFloat(r.getPropertyValue("padding-top")),u=Number.parseFloat(r.getPropertyValue("border-bottom-width"))+Number.parseFloat(r.getPropertyValue("border-top-width"));return{contextStyle:gt.map(c=>`${c}:${r.getPropertyValue(c)}`).join(";"),paddingSize:o,borderSize:u,boxSizing:l}}function Fe(a,r=1,l){var o;C||(C=document.createElement("textarea"),document.body.appendChild(C));const{paddingSize:u,borderSize:p,boxSizing:c,contextStyle:s}=bt(a);C.setAttribute("style",`${s};${ht}`),C.value=a.value||a.placeholder||"";let i=C.scrollHeight;const y={};c==="border-box"?i=i+p:c==="content-box"&&(i=i-u),C.value="";const f=C.scrollHeight-u;if(ye(r)){let w=f*r;c==="border-box"&&(w=w+u+p),i=Math.max(w,i),y.minHeight=`${w}px`}if(ye(l)){let w=f*l;c==="border-box"&&(w=w+u+p),i=Math.min(w,i)}return y.height=`${i}px`,(o=C.parentNode)==null||o.removeChild(C),C=void 0,y}const yt=We({id:{type:String,default:void 0},size:Ue,disabled:Boolean,modelValue:{type:q([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:q([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:xe},prefixIcon:{type:xe},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:q([Object,Array,String]),default:()=>Ye({})},autofocus:Boolean,rows:{type:Number,default:2},...Xe(["ariaLabel"])}),xt={[oe]:a=>Z(a),input:a=>Z(a),change:a=>Z(a),focus:a=>a instanceof FocusEvent,blur:a=>a instanceof FocusEvent,clear:()=>!0,mouseleave:a=>a instanceof MouseEvent,mouseenter:a=>a instanceof MouseEvent,keydown:a=>a instanceof Event,compositionstart:a=>a instanceof CompositionEvent,compositionupdate:a=>a instanceof CompositionEvent,compositionend:a=>a instanceof CompositionEvent};function wt(a,{beforeFocus:r,afterFocus:l,beforeBlur:o,afterBlur:u}={}){const p=Ge(),{emit:c}=p,s=Y(),i=L(!1),y=b=>{(we(r)?r(b):!1)||i.value||(i.value=!0,c("focus",b),l==null||l())},f=b=>{var x;(we(o)?o(b):!1)||b.relatedTarget&&((x=s.value)==null?void 0:x.contains(b.relatedTarget))||(i.value=!1,c("blur",b),u==null||u())},w=()=>{var b,x;((b=s.value)==null?void 0:b.contains(document.activeElement))&&s.value!==document.activeElement||(x=a.value)==null||x.focus()};return X(s,b=>{b&&b.setAttribute("tabindex","-1")}),ee(s,"focus",y,!0),ee(s,"blur",f,!0),ee(s,"click",w,!0),{isFocused:i,wrapperRef:s,handleFocus:y,handleBlur:f}}const Ct=a=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(a);function St({afterComposition:a,emit:r}){const l=L(!1),o=s=>{r==null||r("compositionstart",s),l.value=!0},u=s=>{var i;r==null||r("compositionupdate",s);const y=(i=s.target)==null?void 0:i.value,f=y[y.length-1]||"";l.value=!Ct(f)},p=s=>{r==null||r("compositionend",s),l.value&&(l.value=!1,V(()=>a(s)))};return{isComposing:l,handleComposition:s=>{s.type==="compositionend"?p(s):u(s)},handleCompositionStart:o,handleCompositionUpdate:u,handleCompositionEnd:p}}function It(a){let r;function l(){if(a.value==null)return;const{selectionStart:u,selectionEnd:p,value:c}=a.value;if(u==null||p==null)return;const s=c.slice(0,Math.max(0,u)),i=c.slice(Math.max(0,p));r={selectionStart:u,selectionEnd:p,value:c,beforeTxt:s,afterTxt:i}}function o(){if(a.value==null||r==null)return;const{value:u}=a.value,{beforeTxt:p,afterTxt:c,selectionStart:s}=r;if(p==null||c==null||s==null)return;let i=u.length;if(u.endsWith(c))i=u.length-c.length;else if(u.startsWith(p))i=p.length;else{const y=p[s-1],f=u.indexOf(y,s-1);f!==-1&&(i=f+1)}a.value.setSelectionRange(i,i)}return[l,o]}const Et=Ne({name:"ElInput",inheritAttrs:!1}),zt=Ne({...Et,props:yt,emits:xt,setup(a,{expose:r,emit:l}){const o=a,u=Je(),p=vt(),c=Qe(),s=h(()=>[o.type==="textarea"?ae.b():n.b(),n.m(b.value),n.is("disabled",x.value),n.is("exceed",Me.value),{[n.b("group")]:c.prepend||c.append,[n.m("prefix")]:c.prefix||o.prefixIcon,[n.m("suffix")]:c.suffix||o.suffixIcon||o.clearable||o.showPassword,[n.bm("suffix","password-clear")]:K.value&&J.value,[n.b("hidden")]:o.type==="hidden"},u.class]),i=h(()=>[n.e("wrapper"),n.is("focus",D.value)]),{form:y,formItem:f}=_e(),{inputId:w}=qe(o,{formItemContext:f}),b=Ze(),x=et(),n=Ce("input"),ae=Ce("textarea"),H=Y(),I=Y(),G=L(!1),A=L(!1),ne=L(),O=Y(o.inputStyle),F=h(()=>H.value||I.value),{wrapperRef:Pe,isFocused:D,handleFocus:Ve,handleBlur:Te}=wt(F,{beforeFocus(){return x.value},afterBlur(){var e;o.validateEvent&&((e=f==null?void 0:f.validate)==null||e.call(f,"blur").catch(d=>Se()))}}),se=h(()=>{var e;return(e=y==null?void 0:y.statusIcon)!=null?e:!1}),T=h(()=>(f==null?void 0:f.validateState)||""),le=h(()=>T.value&&tt[T.value]),$e=h(()=>A.value?ot:at),Be=h(()=>[u.style]),ie=h(()=>[o.inputStyle,O.value,{resize:o.resize}]),z=h(()=>nt(o.modelValue)?"":String(o.modelValue)),K=h(()=>o.clearable&&!x.value&&!o.readonly&&!!z.value&&(D.value||G.value)),J=h(()=>o.showPassword&&!x.value&&!!z.value&&(!!z.value||D.value)),k=h(()=>o.showWordLimit&&!!o.maxlength&&(o.type==="text"||o.type==="textarea")&&!x.value&&!o.readonly&&!o.showPassword),Q=h(()=>z.value.length),Me=h(()=>!!k.value&&Q.value>Number(o.maxlength)),Re=h(()=>!!c.suffix||!!o.suffixIcon||K.value||o.showPassword||k.value||!!T.value&&se.value),[re,ue]=It(H);st(I,e=>{if(Le(),!k.value||o.resize!=="both")return;const d=e[0],{width:N}=d.contentRect;ne.value={right:`calc(100% - ${N+15+6}px)`}});const $=()=>{const{type:e,autosize:d}=o;if(!(!ke||e!=="textarea"||!I.value))if(d){const N=ze(d)?d.minRows:void 0,ge=ze(d)?d.maxRows:void 0,be=Fe(I.value,N,ge);O.value={overflowY:"hidden",...be},V(()=>{I.value.offsetHeight,O.value=be})}else O.value={minHeight:Fe(I.value).minHeight}},Le=(e=>{let d=!1;return()=>{var N;if(d||!o.autosize)return;((N=I.value)==null?void 0:N.offsetParent)===null||(e(),d=!0)}})($),B=()=>{const e=F.value,d=o.formatter?o.formatter(z.value):z.value;!e||e.value===d||(e.value=d)},_=async e=>{re();let{value:d}=e.target;if(o.formatter&&(d=o.parser?o.parser(d):d),!de.value){if(d===z.value){B();return}l(oe,d),l("input",d),await V(),B(),ue()}},ce=e=>{l("change",e.target.value)},{isComposing:de,handleCompositionStart:pe,handleCompositionUpdate:fe,handleCompositionEnd:ve}=St({emit:l,afterComposition:_}),He=()=>{re(),A.value=!A.value,setTimeout(ue)},Ae=()=>{var e;return(e=F.value)==null?void 0:e.focus()},Oe=()=>{var e;return(e=F.value)==null?void 0:e.blur()},De=e=>{G.value=!1,l("mouseleave",e)},Ke=e=>{G.value=!0,l("mouseenter",e)},me=e=>{l("keydown",e)},je=()=>{var e;(e=F.value)==null||e.select()},he=()=>{l(oe,""),l("change",""),l("clear"),l("input","")};return X(()=>o.modelValue,()=>{var e;V(()=>$()),o.validateEvent&&((e=f==null?void 0:f.validate)==null||e.call(f,"change").catch(d=>Se()))}),X(z,()=>B()),X(()=>o.type,async()=>{await V(),B(),$()}),lt(()=>{!o.formatter&&o.parser,B(),V($)}),r({input:H,textarea:I,ref:F,textareaStyle:ie,autosize:it(o,"autosize"),isComposing:de,focus:Ae,blur:Oe,select:je,clear:he,resizeTextarea:$}),(e,d)=>(v(),S("div",{class:g([t(s),{[t(n).bm("group","append")]:e.$slots.append,[t(n).bm("group","prepend")]:e.$slots.prepend}]),style:Ee(t(Be)),onMouseenter:Ke,onMouseleave:De},[m(" input "),e.type!=="textarea"?(v(),S(te,{key:0},[m(" prepend slot "),e.$slots.prepend?(v(),S("div",{key:0,class:g(t(n).be("group","prepend"))},[j(e.$slots,"prepend")],2)):m("v-if",!0),P("div",{ref_key:"wrapperRef",ref:Pe,class:g(t(i))},[m(" prefix slot "),e.$slots.prefix||e.prefixIcon?(v(),S("span",{key:0,class:g(t(n).e("prefix"))},[P("span",{class:g(t(n).e("prefix-inner"))},[j(e.$slots,"prefix"),e.prefixIcon?(v(),E(t(R),{key:0,class:g(t(n).e("icon"))},{default:M(()=>[(v(),E(W(e.prefixIcon)))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0),P("input",Ie({id:t(w),ref_key:"input",ref:H,class:t(n).e("inner")},t(p),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?A.value?"text":"password":e.type,disabled:t(x),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:t(pe),onCompositionupdate:t(fe),onCompositionend:t(ve),onInput:_,onChange:ce,onKeydown:me}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),m(" suffix slot "),t(Re)?(v(),S("span",{key:1,class:g(t(n).e("suffix"))},[P("span",{class:g(t(n).e("suffix-inner"))},[!t(K)||!t(J)||!t(k)?(v(),S(te,{key:0},[j(e.$slots,"suffix"),e.suffixIcon?(v(),E(t(R),{key:0,class:g(t(n).e("icon"))},{default:M(()=>[(v(),E(W(e.suffixIcon)))]),_:1},8,["class"])):m("v-if",!0)],64)):m("v-if",!0),t(K)?(v(),E(t(R),{key:1,class:g([t(n).e("icon"),t(n).e("clear")]),onMousedown:ct(t(dt),["prevent"]),onClick:he},{default:M(()=>[rt(t(ut))]),_:1},8,["class","onMousedown"])):m("v-if",!0),t(J)?(v(),E(t(R),{key:2,class:g([t(n).e("icon"),t(n).e("password")]),onClick:He},{default:M(()=>[(v(),E(W(t($e))))]),_:1},8,["class"])):m("v-if",!0),t(k)?(v(),S("span",{key:3,class:g(t(n).e("count"))},[P("span",{class:g(t(n).e("count-inner"))},U(t(Q))+" / "+U(e.maxlength),3)],2)):m("v-if",!0),t(T)&&t(le)&&t(se)?(v(),E(t(R),{key:4,class:g([t(n).e("icon"),t(n).e("validateIcon"),t(n).is("loading",t(T)==="validating")])},{default:M(()=>[(v(),E(W(t(le))))]),_:1},8,["class"])):m("v-if",!0)],2)],2)):m("v-if",!0)],2),m(" append slot "),e.$slots.append?(v(),S("div",{key:1,class:g(t(n).be("group","append"))},[j(e.$slots,"append")],2)):m("v-if",!0)],64)):(v(),S(te,{key:1},[m(" textarea "),P("textarea",Ie({id:t(w),ref_key:"textarea",ref:I,class:[t(ae).e("inner"),t(n).is("focus",t(D))]},t(p),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:t(x),readonly:e.readonly,autocomplete:e.autocomplete,style:t(ie),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:t(pe),onCompositionupdate:t(fe),onCompositionend:t(ve),onInput:_,onFocus:t(Ve),onBlur:t(Te),onChange:ce,onKeydown:me}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),t(k)?(v(),S("span",{key:0,style:Ee(ne.value),class:g(t(n).e("count"))},U(t(Q))+" / "+U(e.maxlength),7)):m("v-if",!0)],64))],38))}});var Ft=pt(zt,[["__file","input.vue"]]);const Tt=ft(Ft);export{Tt as E,wt as a,mt as i,St as u};
