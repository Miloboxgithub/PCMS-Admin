import{c1 as L,A as E,o as k,a as B,e as b,d as A,I as F,y as v,w as p,f as C}from"./index.12244a07.js";import{E as I}from"./el-card.ac56ffcc.js";var _={exports:{}};(function(f,P){(function(x,y){f.exports=y()})(L,function(){function x(c,t){for(var i=0;i<t.length;i++){var e=t[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(c,e.key,e)}}function y(c){return function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}(c)||function(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=window.devicePixelRatio||1,o=10*r,h=o/2;return function(){function c(t,i){(function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")})(this,c),this.canvas=function(e){var s=document.getElementById(e),a=s.parentNode.clientWidth,l=s.parentNode.clientHeight;return s.style.width=a+"px",s.style.height=l+"px",s.width=a*r,s.height=l*r,s}(t),this.ctx=this.canvas.getContext("2d"),this.type="bar",this.showValue=!0,this.showGrid=!0,this.topPadding=60*r,this.leftPadding=50*r,this.rightPadding=10*r,this.bottomPadding=50*r,this.yEqual=5,this.yLength=0,this.xLength=0,this.ySpace=0,this.xRorate=0,this.yRorate=0,this.xRotate=0,this.yRotate=0,this.bgColor="#fff",this.axisColor="#666",this.gridColor="#eee",this.title={text:"",color:"#666",position:"top",font:"bold "+18*r+"px Arial",top:o,bottom:h},this.legend={display:!0,position:"top",color:"#666",font:14*r+"px Arial",top:45*r,bottom:15*r,textWidth:0},this.radius=100*r,this.innerRadius=60*r,this.colorList=["#4A90E2","#F5A623","#ff5858","#5e64ff","#2AC766","#743ee2","#b554ff","#199475"],this.init(i)}return function(t,i,e){i&&x(t.prototype,i),e&&x(t,e)}(c,[{key:"init",value:function(t){if(t.title=Object.assign({},this.title,t.title),t.legend=Object.assign({},this.legend,t.legend),Object.assign(this,t),!t.labels||!t.labels.length)throw new Error("\u7F3A\u5C11\u4E3B\u8981\u53C2\u6570labels");if(!t.datasets||!t.datasets.length)throw new Error("\u7F3A\u5C11\u4E3B\u8981\u53C2\u6570datasets");this.drawBackground(),this.type==="bar"||this.type==="line"?this.renderBarChart():this.renderPieChart(),this.drawLegend()}},{key:"renderBarChart",value:function(){this.yLength=Math.floor((this.canvas.height-this.topPadding-this.bottomPadding-o)/this.yEqual),this.xLength=Math.floor((this.canvas.width-this.leftPadding-this.rightPadding-o)/this.labels.length),this.ySpace=function(t,i){var e=t.map(function(l){return l.data.reduce(function(n,d){return d<n?n:d})}),s=Math.ceil(Math.max.apply(Math,y(e))/i),a=s.toString().length-1;return a=2<a?2:a,Math.ceil(s/Math.pow(10,a))*Math.pow(10,a)}(this.datasets,this.yEqual),this.drawXAxis(),this.drawYAxis(),this.drawBarContent()}},{key:"drawBarContent",value:function(){var t=this.ctx,i=this.datasets.length;t.beginPath();for(var e=0;e<i;e++){t.font=this.legend.font,this.legend.textWidth+=Math.ceil(t.measureText(this.datasets[e].label).width),t.fillStyle=t.strokeStyle=this.datasets[e].fillColor||this.colorList[e];for(var s=this.datasets[e].data,a=0;a<s.length;a++)if(!(a>this.labels.length-1)){var l=this.xLength/(i+1),n=this.yLength/this.ySpace,d=this.leftPadding+this.xLength*a+l*(e+.5),u=d+l,m=this.canvas.height-this.bottomPadding,g=m-s[a]*n;if(this.type==="bar")t.fillRect(d,g,u-d,m-g),this.drawValue(s[a],d+l/2,g-h);else if(this.type==="line"){var w=this.leftPadding+this.xLength*(a+.5);t.beginPath(),t.arc(w,g,3*r,0,2*Math.PI,!0),t.fill(),a!==0&&(t.beginPath(),t.strokeStyle=this.datasets[e].fillColor||this.colorList[e],t.lineWidth=2*r,t.moveTo(w-this.xLength,m-s[a-1]*n),t.lineTo(w,g),t.stroke(),t.lineWidth=1*r),this.drawValue(s[a],w,g-o)}}}t.stroke()}},{key:"renderPieChart",value:function(){for(var t=this.ctx,i=this.labels.length,e=this.datasets[0],s=e.data,a=s.reduce(function(M,S){return M+S}),l=-Math.PI/2,n=this.canvas.width/2,d=this.canvas.height/2,u=0;u<i;u++){t.font=this.legend.font,this.legend.textWidth+=Math.ceil(t.measureText(this.labels[u]).width),t.beginPath(),t.strokeStyle=t.fillStyle=e.colorList&&e.colorList[u]||this.colorList[u],t.moveTo(n,d);var m=l,g=l+=s[u]/a*2*Math.PI;t.arc(n,d,this.radius,m,g),t.closePath(),t.fill();var w=(m+g)/2;this.drawPieValue(s[u],w)}this.type==="ring"&&(t.beginPath(),t.fillStyle=this.bgColor,t.arc(n,d,this.innerRadius,0,2*Math.PI),t.closePath(),t.fill())}},{key:"drawValue",value:function(t,i,e){var s=this.ctx;this.showValue&&(s.textBaseline="middle",s.font=12*r+"px Arial",s.textAlign="center",s.fillText(t,i,e))}},{key:"drawPieValue",value:function(t,i){var e=this.ctx;if(this.showValue){var s=this.canvas.width/2,a=this.canvas.height/2,l=Math.ceil(Math.abs(this.radius*Math.cos(i))),n=Math.floor(Math.abs(this.radius*Math.sin(i)));e.textBaseline="middle",this.showValue&&(i<=0?(e.textAlign="left",e.moveTo(s+l,a-n),e.lineTo(s+l+o,a-n-o),e.moveTo(s+l+o,a-n-o),e.lineTo(s+l+3*o,a-n-o),e.stroke(),e.fillText(t,s+l+3.5*o,a-n-o)):0<i&&i<=Math.PI/2?(e.textAlign="left",e.moveTo(s+l,a+n),e.lineTo(s+l+o,a+n+o),e.moveTo(s+l+o,a+n+o),e.lineTo(s+l+3*o,a+n+o),e.stroke(),e.fillText(t,s+l+3.5*o,a+n+o)):i>Math.PI/2&&i<Math.PI?(e.textAlign="right",e.moveTo(s-l,a+n),e.lineTo(s-l-o,a+n+o),e.moveTo(s-l-o,a+n+o),e.lineTo(s-l-3*o,a+n+o),e.stroke(),e.fillText(t,s-l-3.5*o,a+n+o)):(e.textAlign="right",e.moveTo(s-l,a-n),e.lineTo(s-l-o,a-n-o),e.moveTo(s-l-o,a-n-o),e.lineTo(s-l-3*o,a-n-o),e.stroke(),e.fillText(t,s-l-3.5*o,a-n-o)))}}},{key:"drawBackground",value:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawTitle()}},{key:"drawTitle",value:function(){var t=this.title;if(t.text){var i=this.ctx;i.beginPath(),i.font=t.font,i.textAlign="center",i.fillStyle=t.color,t.position==="top"?(i.textBaseline="top",i.fillText(t.text,this.canvas.width/2,t.top)):(i.textBaseline="bottom",i.fillText(t.text,this.canvas.width/2,this.canvas.height-t.bottom))}}},{key:"drawXAxis",value:function(){var t=this.ctx,i=this.canvas.height-this.bottomPadding+.5;t.beginPath(),t.strokeStyle=this.axisColor,t.moveTo(this.leftPadding,i),t.lineTo(this.canvas.width-this.rightPadding,i),t.stroke(),this.drawXPoint()}},{key:"drawXPoint",value:function(){var t=this.ctx;t.beginPath(),t.font=12*r+"px Microsoft YaHei",t.textAlign=this.xRorate||this.xRotate?"right":"center",t.textBaseline="top",t.fillStyle=this.axisColor;for(var i=0;i<this.labels.length;i++){var e=this.labels[i],s=this.leftPadding+this.xLength*(i+1)+.5,a=this.canvas.height-this.bottomPadding;this.showGrid?(t.strokeStyle=this.gridColor,t.moveTo(s,a),t.lineTo(s,this.topPadding+o)):(t.moveTo(s,a),t.lineTo(s,a-h)),t.stroke(),t.save(),t.translate(s-this.xLength/2,a+h),this.xRorate?t.rotate(-this.xRorate*Math.PI/180):t.rotate(-this.xRotate*Math.PI/180),t.fillText(e,0,0),t.restore()}}},{key:"drawYAxis",value:function(){var t=this.ctx;t.beginPath(),t.strokeStyle=this.axisColor,t.moveTo(this.leftPadding-.5,this.canvas.height-this.bottomPadding+.5),t.lineTo(this.leftPadding-.5,this.topPadding+.5),t.stroke(),this.drawYPoint()}},{key:"drawYPoint",value:function(){var t=this.ctx;t.font=12*r+"px Microsoft YaHei",t.textAlign="right",t.textBaseline="middle",t.beginPath();for(var i=0;i<this.yEqual;i++){var e=this.leftPadding,s=this.canvas.height-this.bottomPadding-this.yLength*(i+1)+.5;this.showGrid?(t.strokeStyle=this.gridColor,t.moveTo(e,s),t.lineTo(this.canvas.width-this.rightPadding-o,s)):(t.strokeStyle=this.axisColor,t.moveTo(e-h,s),t.lineTo(e,s)),t.stroke(),t.save(),t.fillStyle=this.axisColor,t.translate(e-o,s),this.yRorate?t.rotate(-this.yRorate*Math.PI/180):t.rotate(-this.yRotate*Math.PI/180),t.fillText(this.ySpace*(i+1),0,0),t.restore()}}},{key:"drawLegend",value:function(){var t=this.legend;if(t.display){var i=this.ctx,e=this.type==="pie"||this.type==="ring";i.beginPath(),i.font=t.font,i.textAlign="left",i.textBaseline="middle";for(var s=e?this.labels.length:this.datasets.length,a=(this.canvas.width-(this.legend.textWidth+(5*s-2)*o))/2,l=0,n=0;n<s;n++){var d=e?this.datasets[0]:this.datasets[n],u=(e?this.labels[n]:d.label)||"";i.fillStyle=d.colorList&&d.colorList[n]||d.fillColor||this.colorList[n],t.position==="top"?(this.drawLegendIcon(a+5*o*n+l,t.top-h,2*o,o),i.fillStyle=t.color,i.fillText(u,a+(5*n+3)*o+l,t.top)):t.position==="bottom"?(this.drawLegendIcon(a+5*o*n+l,this.canvas.height-t.bottom-h,2*o,o),i.fillStyle=t.color,i.fillText(u,a+(5*n+3)*o+l,this.canvas.height-t.bottom)):(i.fillRect(o,t.top+2*o*n,2*o,o),i.fillStyle=t.color,i.fillText(u,4*o,t.top+2*o*n+.5*o)),l+=Math.ceil(i.measureText(u).width)}}}},{key:"drawLegendIcon",value:function(t,i,e,s){var a=this.ctx;this.type==="line"?(a.beginPath(),a.strokeStyle=a.fillStyle,a.lineWidth=2*r,a.moveTo(t,i+h),a.lineTo(t+2*o,i+h),a.stroke(),a.lineWidth=1*r,a.arc(t+o,i+h,3*r,0,2*Math.PI,!0),a.fill()):a.fillRect(t,i,e,s)}}]),c}()})})(_);const R=_.exports,D={props:{canvasId:{type:String,default:"",required:!0},options:{type:Object,required:!0}},mounted(){this.renderChart()},methods:{renderChart(){if(!this.checkOptions())return;const f={...this.options};new R(this.canvasId,f)},checkOptions(){const f=this.options;return!(!f.datasets||!f.datasets.length||!f.labels||!f.labels.length)}},watch:{options:{handler(f,P){this.renderChart()},deep:!0}}},V=["id"];function j(f,P,x,y,r,o){return k(),B("div",null,[b("canvas",{id:x.canvasId},null,8,V)])}const T=E(D,[["render",j]]),O={class:"container"},W=A({name:"schart"}),q=A({...W,setup(f){const P={type:"bar",title:{text:"\u6700\u8FD1\u4E00\u5468\u5404\u54C1\u7C7B\u9500\u552E\u56FE"},colorList:["#3f51b5","#009688","#f44336","#00bcd4","#1ABC9C"],labels:["\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94"],datasets:[{label:"\u5BB6\u7535",data:[234,278,270,190,230]},{label:"\u767E\u8D27",data:[164,178,190,135,160]},{label:"\u98DF\u54C1",data:[144,198,150,235,120]}]},x={type:"line",title:{text:"\u6700\u8FD1\u51E0\u4E2A\u6708\u5404\u54C1\u7C7B\u9500\u552E\u8D8B\u52BF\u56FE"},colorList:["#3f51b5","#009688","#f44336","#00bcd4","#1ABC9C"],labels:["6\u6708","7\u6708","8\u6708","9\u6708","10\u6708"],datasets:[{label:"\u5BB6\u7535",data:[234,278,270,190,230]},{label:"\u767E\u8D27",data:[164,178,150,135,160]},{label:"\u98DF\u54C1",data:[114,138,200,235,190]}]},y={type:"pie",title:{text:"\u670D\u88C5\u54C1\u7C7B\u9500\u552E\u997C\u72B6\u56FE"},legend:{position:"left"},colorList:["#2196f3","#673ab7","#009688","#1ABC9C","#3f51b5","#f44336","#00bcd4"],labels:["T\u6064","\u725B\u4ED4\u88E4","\u8FDE\u8863\u88D9","\u6BDB\u8863","\u4E03\u5206\u88E4","\u77ED\u88D9","\u7FBD\u7ED2\u670D"],datasets:[{data:[334,278,190,235,260,200,141]}]},r={type:"ring",title:{text:"\u73AF\u5F62\u4E09\u7B49\u5206"},showValue:!1,legend:{position:"bottom",bottom:40},colorList:["#3f51b5","#009688","#f44336","#00bcd4","#1ABC9C"],labels:["vue","react","angular"],datasets:[{data:[500,500,500]}]};return(o,h)=>{const c=I;return k(),B("div",O,[h[4]||(h[4]=b("div",{class:"plugins-tips"},[F(" vue-schart\uFF1Avue.js\u5C01\u88C5sChart.js\u7684\u56FE\u8868\u7EC4\u4EF6\u3002 \u8BBF\u95EE\u5730\u5740\uFF1A "),b("a",{href:"https://github.com/lin-xin/vue-schart",target:"_blank"},"vue-schart")],-1)),v(c,{class:"mgb20",shadow:"hover"},{header:p(()=>h[0]||(h[0]=[b("div",{class:"content-title"},"\u67F1\u72B6\u56FE",-1)])),default:p(()=>[v(C(T),{class:"schart",canvasId:"bar",options:P})]),_:1}),v(c,{class:"mgb20",shadow:"hover"},{header:p(()=>h[1]||(h[1]=[b("div",{class:"content-title"},"\u6298\u7EBF\u56FE",-1)])),default:p(()=>[v(C(T),{class:"schart",canvasId:"line",options:x})]),_:1}),v(c,{class:"mgb20",shadow:"hover"},{header:p(()=>h[2]||(h[2]=[b("div",{class:"content-title"},"\u997C\u72B6\u56FE",-1)])),default:p(()=>[v(C(T),{class:"schart",canvasId:"pie",options:y})]),_:1}),v(c,{class:"mgb20",shadow:"hover"},{header:p(()=>h[3]||(h[3]=[b("div",{class:"content-title"},"\u73AF\u5F62\u56FE",-1)])),default:p(()=>[v(C(T),{class:"schart",canvasId:"ring",options:r})]),_:1})])}}});const N=E(q,[["__scopeId","data-v-a4839179"]]);export{N as default};
