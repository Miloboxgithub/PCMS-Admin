import{d as k,s as H,v as a,S as w,T as J,o as n,a as L,y as c,e as Q,j as p,w as l,f as D,I as m,U as X}from"./index.12244a07.js";import{T as _,E as Z,_ as uu,a as eu}from"./table-search.9a52be5d.js";import"./el-tag.9c674d0f.js";import{x,y as h,z as tu,A as au}from"./index.e2c71170.js";import{T as lu}from"./table-custom.f6f335e2.js";import{E as ou}from"./index.01a27f37.js";import{E as d}from"./index.85100a56.js";import"./event.1aa8b38f.js";import"./index.4d06eba3.js";import"./scroll.4bdf40b7.js";import"./el-form-item.ce222cb9.js";import"./_baseClone.ce459c13.js";import"./_Uint8Array.869745a5.js";import"./_initCloneObject.d1045298.js";import"./el-col.9d5e7896.js";import"./el-progress.d9524178.js";import"./cloneDeep.249e6c55.js";import"./isEqual.3cc19f5b.js";import"./el-date-picker.da63982f.js";import"./el-select.ff2d79de.js";/* empty css                 */import"./el-input-number.6962d3b9.js";import"./index.318875f8.js";import"./index.bccee1bd.js";import"./index.e921f451.js";import"./el-table-column.53d704a2.js";import"./isPlainObject.e6d32bd1.js";import"./_baseIteratee.ef24a81b.js";import"./debounce.b932a66e.js";import"./el-checkbox.4a8a00ed.js";import"./raf.294279dc.js";import"./index.07ec0462.js";import"./date.8d8ac76d.js";import"./axios.bf444489.js";import"./el-divider.e8ffbcc2.js";import"./strings.c7fbc6d7.js";const su={class:"container"},nu=k({name:"system-user"}),Ku=k({...nu,setup(ru){const N=H(),q=()=>{N.push("/login"),d.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25")};console.log(_.props,"search"),a(""),a("");const S=w({}),T=a([{type:"input",label:"\u67E5\u8BE2\uFF1A",prop:"name"}]);let V=a([{type:"selection",width:55,align:"center"},{prop:"ad",label:"\u5E8F\u53F7",width:55,align:"center"},{prop:"adminName",label:"\u7BA1\u7406\u5458\u59D3\u540D"},{prop:"adminSno",label:"\u7BA1\u7406\u5458\u5DE5\u53F7"},{prop:"email",label:"\u90AE\u7BB1"},{prop:"grade",label:"\u5E74\u7EA7"},{prop:"majorName",label:"\u4E13\u4E1A"},{prop:"phone",label:"\u7535\u8BDD\u53F7\u7801"},{prop:"operator",label:"\u64CD\u4F5C",width:250}]);const s=w({index:1,size:10,total:0}),b=a(0),B=a([]),r=async(e,u)=>{const t=await x(e,u,"");t=="Request failed with status code 403"&&q(),B.value=t.AdminAdmins,s.total=t.total,b.value++,console.log(t,B.value,"tableData")};r(1,0);const j=async e=>{if(!e.name)r(1,0);else{const u=await x(1,0,e.name);u.AdminAdmins==null?d.error("\u67E5\u8BE2\u5931\u8D25"):(console.log(u,"ress"),B.value=u.AdminAdmins,s.total=u.AdminAdmins.length,b.value++,d.success("\u67E5\u8BE2\u6210\u529F"))}},Y=(e,u,t)=>{s.index=e,r(s.index,t)};function P(e){const u=new Date().getFullYear(),t=[];for(let E=0;E<e;E++)t.push({label:u-E,value:u-E});return t}const F=P(4);let R=a({labelWidth:"140px",span:12,list:[{type:"input",label:"\u59D3\u540D",prop:"adminName",required:!0},{type:"input",label:"\u5DE5\u53F7",prop:"adminSno",required:!0},{type:"input",label:"\u7535\u8BDD",prop:"phone"},{type:"input",label:"\u90AE\u7BB1",prop:"email"},{type:"select",label:"\u4E13\u4E1A",prop:"majorName",required:!0,options:[{label:"\u673A\u68B0\u8BBE\u8BA1\u5236\u4F5C\u53CA\u5176\u81EA\u52A8\u5316",value:"\u673A\u68B0\u8BBE\u8BA1\u5236\u4F5C\u53CA\u5176\u81EA\u52A8\u5316"},{label:"\u7535\u5B50\u79D1\u5B66\u4E0E\u6280\u672F",value:"\u7535\u5B50\u79D1\u5B66\u4E0E\u6280\u672F"},{label:"\u81EA\u52A8\u5316",value:"\u81EA\u52A8\u5316"},{label:"\u673A\u5668\u4EBA\u5DE5\u7A0B",value:"\u673A\u5668\u4EBA\u5DE5\u7A0B"}]},{type:"select",label:"\u5E74\u7EA7",prop:"grade",required:!0,options:F}]}),U=a({labelWidth:"140px",span:12,list:[{type:"input",label:"\u59D3\u540D",prop:"adminName",required:!0},{type:"input",label:"\u5DE5\u53F7",prop:"adminSno",required:!0},{type:"input",label:"\u5BC6\u7801",prop:"password",required:!0},{type:"select",label:"\u4E13\u4E1A",prop:"majorName",required:!0,options:[{label:"\u673A\u68B0\u8BBE\u8BA1\u5236\u4F5C\u53CA\u5176\u81EA\u52A8\u5316",value:"\u673A\u68B0\u8BBE\u8BA1\u5236\u4F5C\u53CA\u5176\u81EA\u52A8\u5316"},{label:"\u7535\u5B50\u79D1\u5B66\u4E0E\u6280\u672F",value:"\u7535\u5B50\u79D1\u5B66\u4E0E\u6280\u672F"},{label:"\u81EA\u52A8\u5316",value:"\u81EA\u52A8\u5316"},{label:"\u673A\u5668\u4EBA\u5DE5\u7A0B",value:"\u673A\u5668\u4EBA\u5DE5\u7A0B"}]},{type:"select",label:"\u5E74\u7EA7",prop:"grade",required:!0,options:F}]});const A=a(!1),$=a(!1),i=a(!1);a(!1);const y=a({}),z=e=>{y.value={...e},i.value=!0,A.value=!0,r(1,0)},M={\u673A\u68B0\u8BBE\u8BA1\u5236\u4F5C\u53CA\u5176\u81EA\u52A8\u5316:"0101",\u7535\u5B50\u79D1\u5B66\u4E0E\u6280\u672F:"0102",\u673A\u5668\u4EBA\u5DE5\u7A0B:"0104",\u81EA\u52A8\u5316:"0103"},W=async e=>{if(e.majorCode=M[e.majorName],i.value){const u=await tu(e);console.log(u,"\u66F4\u65B0\u6570\u636E")}else{const u=await au(e);console.log(u,"\u65B0\u5EFA\u6570\u636E")}g(),setTimeout(()=>{r(1,0)},500)},g=()=>{A.value=!1,$.value=!1,i.value=!1},f=a(!1),v=a({row:{},list:[]}),I=e=>{v.value.row={...e},v.value.list=[{prop:"ad",label:"\u5E8F\u53F7"},{prop:"adminName",label:"\u59D3\u540D"},{prop:"adminSno",label:"\u5DE5\u53F7"},{prop:"majorName",label:"\u4E13\u4E1A"},{prop:"grade",label:"\u5E74\u7EA7"},{prop:"phone",label:"\u7535\u8BDD"},{prop:"email",label:"\u90AE\u7BB1"}],f.value=!0},K=e=>{let u=[];e.length>0&&e.forEach(t=>{u.push(t.adminSno)}),h(u).then(t=>{d.success("\u5220\u9664\u6210\u529F"),r(1,0),s.index=1}).catch(t=>{d.error("\u5220\u9664\u5931\u8D25")})},O=async e=>{let u=[e.adminSno];(await h(u)).code!=50?d.success("\u5220\u9664\u6210\u529F"):d.error("\u5220\u9664\u5931\u8D25"),r(1,0),s.index=1};return(e,u)=>{const t=ou,E=J,G=eu,C=Z;return n(),L("div",null,[c(_,{query:S,options:T.value,search:j},null,8,["query","options"]),Q("div",su,[(n(),p(lu,{key:b.value,columns:D(V),tableData:B.value,total:s.total,currentPage:s.index,viewFunc:I,delFunc:O,changePage:Y,editFunc:z,delSelection:K},{status:l(({rows:o})=>[o.status==0?(n(),p(t,{key:0,type:"warning"},{default:l(()=>u[3]||(u[3]=[m("\u672A\u5F00\u59CB")])),_:1})):o.status==1?(n(),p(t,{key:1,type:"success"},{default:l(()=>u[4]||(u[4]=[m("\u5DF2\u5F00\u59CB")])),_:1})):(n(),p(t,{key:2,type:"info"},{default:l(()=>u[5]||(u[5]=[m("\u5DF2\u505C\u6B62")])),_:1}))]),toolbarBtn:l(()=>[c(E,{type:"warning",icon:D(X),onClick:u[0]||(u[0]=o=>{A.value=!0,i.value=!1})},{default:l(()=>u[6]||(u[6]=[m("\u65B0\u589E\u7BA1\u7406\u5458")])),_:1},8,["icon"])]),_:1},8,["columns","tableData","total","currentPage"]))]),c(C,{title:i.value?"\u7F16\u8F91":"\u65B0\u589E\u7BA1\u7406\u5458",modelValue:A.value,"onUpdate:modelValue":u[1]||(u[1]=o=>A.value=o),width:"700px","destroy-on-close":"","close-on-click-modal":!1,onClose:g,bu:""},{default:l(()=>[c(G,{"form-data":y.value,options:i.value?D(R):D(U),edit:i.value,update:W},null,8,["form-data","options","edit"])]),_:1},8,["title","modelValue"]),c(C,{title:"\u67E5\u770B\u8BE6\u60C5",modelValue:f.value,"onUpdate:modelValue":u[2]||(u[2]=o=>f.value=o),width:"700px","destroy-on-close":""},{default:l(()=>[c(uu,{data:v.value},{status:l(({rows:o})=>[o.status==0?(n(),p(t,{key:0,type:"warning"},{default:l(()=>u[7]||(u[7]=[m("\u672A\u5F00\u59CB")])),_:1})):o.status==1?(n(),p(t,{key:1,type:"success"},{default:l(()=>u[8]||(u[8]=[m("\u5DF2\u5F00\u59CB")])),_:1})):(n(),p(t,{key:2,type:"info"},{default:l(()=>u[9]||(u[9]=[m("\u5DF2\u505C\u6B62")])),_:1}))]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}});export{Ku as default};
